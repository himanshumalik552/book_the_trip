(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[892],{7787:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return a(8836)}])},7428:function(e,s,a){"use strict";a.d(s,{A:function(){return o},U:function(){return u}});var r=a(5893),i=a(1163),n=a(1664),l=a.n(n),t=a(7536),d=a(7533),c=a(6310),m=a(6677);function o(e){var s,a,n,o;let u=null==e?void 0:e.user,h=(0,i.useRouter)(),b=c.Ry().shape({firstName:c.Z_().required("First Name is required"),lastName:c.Z_().required("Last Name is required"),username:c.Z_().required("Username is required"),password:c.Z_().transform(e=>""===e?void 0:e).concat(u?null:c.Z_().required("Password is required")).min(6,"Password must be at least 6 characters")}),x={resolver:(0,d.X)(b)};u&&(x.defaultValues=e.user);let{register:N,handleSubmit:j,reset:p,formState:f}=(0,t.cI)(x),{errors:v}=f;async function w(e){m.A.clear();try{let s;u?(await m.W.update(u.id,e),s="User updated"):(await m.W.register(e),s="User added"),h.push("/users"),m.A.success(s,!0)}catch(e){m.A.error(e),console.error(e)}}return(0,r.jsxs)("form",{onSubmit:j(w),children:[(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"mb-3 col",children:[(0,r.jsx)("label",{className:"form-label",children:"First Name"}),(0,r.jsx)("input",{name:"firstName",type:"text",...N("firstName"),className:"form-control ".concat(v.firstName?"is-invalid":"")}),(0,r.jsx)("div",{className:"invalid-feedback",children:null===(s=v.firstName)||void 0===s?void 0:s.message})]}),(0,r.jsxs)("div",{className:"mb-3 col",children:[(0,r.jsx)("label",{className:"form-label",children:"Last Name"}),(0,r.jsx)("input",{name:"lastName",type:"text",...N("lastName"),className:"form-control ".concat(v.lastName?"is-invalid":"")}),(0,r.jsx)("div",{className:"invalid-feedback",children:null===(a=v.lastName)||void 0===a?void 0:a.message})]})]}),(0,r.jsxs)("div",{className:"row",children:[(0,r.jsxs)("div",{className:"mb-3 col",children:[(0,r.jsx)("label",{className:"form-label",children:"Username"}),(0,r.jsx)("input",{name:"username",type:"text",...N("username"),className:"form-control ".concat(v.username?"is-invalid":"")}),(0,r.jsx)("div",{className:"invalid-feedback",children:null===(n=v.email)||void 0===n?void 0:n.message})]}),(0,r.jsxs)("div",{className:"mb-3 col",children:[(0,r.jsxs)("label",{className:"form-label",children:["Password",u&&(0,r.jsx)("em",{className:"ms-1",children:"(Leave blank to keep the same password)"})]}),(0,r.jsx)("input",{name:"password",type:"password",...N("password"),className:"form-control ".concat(v.password?"is-invalid":"")}),(0,r.jsx)("div",{className:"invalid-feedback",children:null===(o=v.password)||void 0===o?void 0:o.message})]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsxs)("button",{type:"submit",disabled:f.isSubmitting,className:"btn btn-primary me-2",children:[f.isSubmitting&&(0,r.jsx)("span",{className:"spinner-border spinner-border-sm me-1"}),"Save"]}),(0,r.jsx)("button",{onClick:()=>p(x.defaultValues),type:"button",disabled:f.isSubmitting,className:"btn btn-secondary",children:"Reset"}),(0,r.jsx)(l(),{href:"/users",className:"btn btn-link",children:"Cancel"})]})]})}function u(e){let{children:s}=e;return(0,r.jsx)("div",{className:"p-4",children:(0,r.jsx)("div",{className:"container",children:s})})}},8836:function(e,s,a){"use strict";a.r(s);var r=a(5893),i=a(1664),n=a.n(i),l=a(7294),t=a(8493),d=a(7428),c=a(6677);s.default=function(){let[e,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{c.W.getAll().then(e=>s(e))},[]),(0,r.jsxs)(d.U,{children:[(0,r.jsx)("h1",{children:"Users"}),(0,r.jsx)(n(),{href:"/users/add",className:"btn btn-sm btn-success mb-2",children:"Add User"}),(0,r.jsxs)("table",{className:"table table-striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{width:"30%"},children:"First Name"}),(0,r.jsx)("th",{style:{width:"30%"},children:"Last Name"}),(0,r.jsx)("th",{style:{width:"30%"},children:"Username"}),(0,r.jsx)("th",{style:{width:"10%"}})]})}),(0,r.jsxs)("tbody",{children:[e&&e.map(a=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:a.firstName}),(0,r.jsx)("td",{children:a.lastName}),(0,r.jsx)("td",{children:a.username}),(0,r.jsxs)("td",{style:{whiteSpace:"nowrap"},children:[(0,r.jsx)(n(),{href:"/users/edit/".concat(a.id),className:"btn btn-sm btn-primary me-1",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>{var r;return r=a.id,void(s(e.map(e=>(e.id===r&&(e.isDeleting=!0),e))),c.W.delete(r).then(()=>{s(e=>e.filter(e=>e.id!==r))}))},className:"btn btn-sm btn-danger btn-delete-user",style:{width:"60px"},disabled:a.isDeleting,children:a.isDeleting?(0,r.jsx)("span",{className:"spinner-border spinner-border-sm"}):(0,r.jsx)("span",{children:"Delete"})})]})]},a.id)),!e&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"4",children:(0,r.jsx)(t.$j,{})})}),e&&!e.length&&(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"4",className:"text-center",children:(0,r.jsx)("div",{className:"p-2",children:"No Users To Display"})})})]})]})]})}}},function(e){e.O(0,[216,774,888,179],function(){return e(e.s=7787)}),_N_E=e.O()}]);